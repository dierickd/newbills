{% extends 'base.html.twig' %}

{% block title %}Project{% endblock %}

{% block body %}
    {#    <div class="main-header"><h1 class="title">{{ project.name }}</h1></div> #}
    <div class="main-container">
        {% if project.status == 1 %}
            {% set modalStatus = 'open' %}
            <div class="alert alert-success border-success p-4 rounded-0">
                <p>Le project <b>{{ project.name }}</b> est actuellement ouvert!</p>
                <button type="button" class="d-inline-block btn btn-sm btn-danger" data-bs-toggle="modal"
                        data-bs-target="#modalReopenProject">
                    Clôturer le projet
                </button>
            </div>
        {% elseif project.status == 2 %}
            {% set modalStatus = 'close' %}
            <div class="alert alert-danger border-danger p-4 rounded-0">
                <p>Le project <b>{{ project.name }}</b> est actuellement fermé!</p>
                <button type="button" class="d-inline-block btn btn-sm btn-success" data-bs-toggle="modal"
                        data-bs-target="#modalReopenProject">
                    Réouvrir le projet
                </button>
            </div>
        {% elseif project.status == 3 %}
            <div class="alert alert-warning border-warning p-4 rounded-0">
                Le project <b>{{ project.name }}</b> est actuellement archivé!
            </div>
        {% endif %}

        <section class="container ms-0 p-0">
            <div class="section-header-project-detail">
                <turbo-frame id="{{ project.id }}">
                    <div>
                        <p class="h3">{{ project.name }}</p>
                        <p class="h6 fw-normal text-secondary">{{ project.application.name }}</p>
                    </div>
                    <div class="my-4">{{ project.description }}</div>
                    {% if project.status == 1 %}
                        <a href="{{ path('app_project_crud_edit', {'slug': project.slug}) }}"
                           class="btn btn-outline-primary btn-edit">
                            <img src="{{ asset('images/edit.svg') }}" alt="Modifier" class="img-fluid">
                        </a>
                    {% endif %}
                </turbo-frame>
            </div>
        </section>
    </div>

    {#  MODAL  #}
    <div class="modal fade" id="modalReopenProject" data-bs-backdrop="static" data-bs-keyboard="false" tabindex="-1"
         aria-labelledby="staticBackdropLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5"
                        id="staticBackdropLabel">{{ modalStatus == 'open' ? 'Cloture de projet' : 'Réouverture de projet' }}</h1>
                    {#                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button> #}
                </div>
                <div class="modal-body">
                    <p>
                        Vous êtes sur le point de {{ modalStatus == 'open' ? 'clôturer' : 'réouvrir' }} le projet
                        <b>{{ project.name }}</b>!
                        <br>
                        Voulez-vous continuer ?
                    </p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-sm" data-bs-dismiss="modal">Annuler</button>
                    <a href="{{ path('app_project_crud_reopen', {'action': modalStatus, 'slug': project.slug}) }}"
                       type="button"
                       class="btn btn-sm btn-primary">{{ modalStatus == 'open' ? 'Cloturer le projet' : 'Réouvrir le projet' }}</a>
                </div>
            </div>
        </div>
    </div>












    {#    <h1>Project</h1> #}

    {#    <table class="table"> #}
    {#        <tbody> #}
    {#            <tr> #}
    {#                <th>Id</th> #}
    {#                <td>{{ project.id }}</td> #}
    {#            </tr> #}
    {#            <tr> #}
    {#                <th>Name</th> #}
    {#                <td>{{ project.name }}</td> #}
    {#            </tr> #}
    {#            <tr> #}
    {#                <th>Created_at</th> #}
    {#                <td>{{ project.createdAt ? project.createdAt|date('Y-m-d H:i:s') : '' }}</td> #}
    {#            </tr> #}
    {#            <tr> #}
    {#                <th>Description</th> #}
    {#                <td>{{ project.description }}</td> #}
    {#            </tr> #}
    {#            <tr> #}
    {#                <th>Status</th> #}
    {#                <td>{{ project.status }}</td> #}
    {#            </tr> #}
    {#            <tr> #}
    {#                <th>Expert</th> #}
    {#                <td>{{ project.expert }}</td> #}
    {#            </tr> #}
    {#            <tr> #}
    {#                <th>Confirmed</th> #}
    {#                <td>{{ project.confirmed }}</td> #}
    {#            </tr> #}
    {#            <tr> #}
    {#                <th>Junior</th> #}
    {#                <td>{{ project.junior }}</td> #}
    {#            </tr> #}
    {#            <tr> #}
    {#                <th>Selected</th> #}
    {#                <td>{{ project.selected }}</td> #}
    {#            </tr> #}
    {#            <tr> #}
    {#                <th>Slug</th> #}
    {#                <td>{{ project.slug }}</td> #}
    {#            </tr> #}
    {#        </tbody> #}
    {#    </table> #}

    {#    <a href="{{ path('app_project_crud_index') }}">back to list</a> #}

    {#    <a href="{{ path('app_project_crud_edit', {'slug': project.slug}) }}">edit</a> #}

    {#    {{ include('project_crud/_delete_form.html.twig') }} #}
{% endblock %}
